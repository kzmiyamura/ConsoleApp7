# ConsoleAppStopwatch (HighPrecisionStopwatch V2)

C# コンソールアプリで実装した、  
**高精度ストップウォッチ**のサンプルプロジェクトです。

キー操作による開始・停止・リセットに対応し、  
`DateTime.UtcNow` を用いた **時間基準ベースの設計（V2）** により、  
描画やスレッド遅延の影響を受けない正確な計測を行います。

---

## 🎯 目的

- C# コンソールアプリの基礎構造理解
- 時間計測ロジックと UI（Console）の分離
- 精度の低い「ループ加算方式」からの脱却
- 実務を意識した設計改善（V1 → V2）

---

## ⏱ 機能一覧

- Space：開始 / 停止（トグル）
- Delete / Backspace：リセット
- Enter：アプリ終了
- 表示形式：`MM:SS.ff`（分:秒.1/100秒）
- 停止中は時間が進まない
- 再開時も正確に継続計測

---

## 🧠 設計のポイント（V2）

### なぜ V2 にしたか？

V1 では以下の問題がありました：

- `Thread.Sleep` の誤差に依存
- 描画遅延で時間がズレる
- 一時停止中も内部時間が進む可能性

V2 では：

- **「現在時刻 − 開始時刻」** を基準に経過時間を算出
- 停止時は経過時間を確定保存
- 再開時は開始時刻を再設定

これにより、  
**処理が遅れても計測時間は正確**になります。

---

## 📂 構成例

ConsoleAppStopwatch
├─ Program.cs
├─ HighPrecisionStopwatch.cs // V1（学習用）
├─ HighPrecisionStopwatchV2.cs // 完成版
└─ README.md

yaml
コードをコピーする

---

## ▶ 実行方法

1. Visual Studio でソリューションを開く
2. `Program.cs` を起動
3. コンソール上でキー操作

---

## 🚀 今後の拡張案

- `System.Diagnostics.Stopwatch` を使ったさらに高精度な実装
- `IStopwatch` インターフェースによる差し替え設計
- 単体テスト対応（時間プロバイダ注入）
- WPF / WinForms への UI 展開
- ラップタイム機能の追加

---

## 📝 補足

このプロジェクトは **学習目的**で作成されていますが、  
構造・考え方は実務でもそのまま通用する内容になっています。

「なぜこう設計したか」を説明できることを重視しています。